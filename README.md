# pheno_curve
This repository contains all of the raw data and scripts needed to reproduce the analysis for the paper "Bee phenological distributions predicted mechanistically by demographic rates" by Stemkovski et al.

You can find an earlier version of the manuscript as a dissertation chapter here: https://www.proquest.com/docview/2825092784

We encourage interested readers to contact Michael Stemkovski at m.stemkovski@gmail.com. This model can be applied to many phenological distributions beyond bees, but the model code is somewhat complex if you're just opening it up for the first time or haven't worked with a Bayesian model before.

Folders:

raw_data contains all raw data from field work, unmodified. Bee data are found in bee_data.csv and bee_data_2021.csv. Flower data are in flower_data.csv and flower_data_2021.csv. Data on sampling effort are in sampling_effort.csv and sampling_effort_2021.csv. plot_locations.csv and rmbl_sites.kmz contain coordinates that were used to generate the map in Figure 1, but are not actually used in the analysis.

clean_data contains data used in the analysis. All of the files in this folder are generated by the data_cleaning.R script, but you can skip that script by using the provided clean data files and going straight to the analysis script.

scripts contains all the cleaning and analysis code. You should run the scripts in this order: functions.R > data_cleaning.R > analysis.R > analysis_aux.R. functions.R contains model simulation and data wrangling functions that are called from other scripts. data_cleaning.R cleans the raw data to get it ready for analysis. analysis.R fits the Bayesian model, shows diagnostic plots, and makes the figures for the manuscript. analysis_aux.R runs some small analysis to get summary statistics for the manuscript Results sections. model.stan contains the Bayesian model code that's called from analysis.R. model_fit.RDS is provided as a convenient fitted model output to save users time. If you want to save several hours and just get the posteriors, load this RDS file in to your R environment and proceed with the code in analysis.R after the model fitting line.
